<!doctype html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DebateCoach</title>

  <link rel="stylesheet" href="/app.css?v=2" />
  <script src="/app.js?v=2" defer></script>
</head>

<body>

  <header class="top">
    <div class="brand">
      <div class="logo">DebateCoach</div>
      <div class="tagline">Start â†’ speak/type â†’ â€œIâ€™m doneâ€ â†’ opponent replies â†’ end â†’ teacher feedback.</div>
    </div>

    <div class="topRight">
      <div class="pill" id="whoPill">Student: PRO â€¢ Computer: CON</div>
      <button class="btn" id="settingsBtn" type="button">âš™ï¸ Settings</button>
    </div>
  </header>

  <section class="topicBar" id="topicBar">
    <div class="topicText" id="topicText">Make English the language of instruction in Israeli schools</div>
    <div class="topicMeta" id="topicMeta">Difficulty: Medium â€¢ Student side: PRO</div>
  </section>

  <main class="grid">
    <!-- LEFT: practice -->
    <section class="panel">
      <div class="panelTitle">Debate practice</div>

      <div class="row rowBetween">
        <div class="row">
          <button class="btn primary" id="startSessionBtn" type="button">â±ï¸ Start session</button>
          <button class="btn" id="resetBtn" type="button">â†©ï¸ Reset</button>
          <button class="btn" id="endSessionBtn" type="button" disabled>ğŸ End</button>
        </div>

        <div class="row">
          <div class="pill" id="turnPill">Not started</div>
          <div class="pill mono" id="timer">05:00</div>
        </div>
      </div>

      <div class="status muted" id="status">Ready. Open Settings to pick topic + sides.</div>

      <div class="subTitle">Your argument</div>
      <textarea id="userText" class="focusBox" placeholder="Type here, or record below. Then press: Iâ€™m done."></textarea>

      <div class="row">
        <button class="btn primary" id="recBtn" type="button">ğŸ™ï¸ Start recording</button>
        <div class="pill mono" id="recTime">00:00</div>
        <button class="btn done" id="doneBtn" type="button" disabled>âœ… Iâ€™m done</button>
      </div>

      <div class="subTitle rowBetween">
        <span>Transcript (what the mic captured)</span>
        <span class="muted tiny">Use this to spot misheard words.</span>
      </div>
      <textarea id="transcriptBox" class="focusBox light" readonly placeholder="After recording, transcript will appear here..."></textarea>

      <div class="subTitle">Computer reply</div>
      <div class="row rowBetween">
        <div class="row">
          <div class="pill" id="autoSpeakPill">Auto-speak: ON</div>
          <button class="btn" id="toggleSpeakBtn" type="button">ğŸ” Toggle</button>
          <button class="btn danger" id="stopSpeakBtn" type="button" disabled>â¹ Stop speaking</button>
        </div>
      </div>

      <div class="replyBox" id="reply">No reply yet.</div>
    </section>

    <!-- RIGHT: teacher feedback -->
    <section class="panel">
      <div class="panelTitle">Teacher feedback (end of session)</div>
      <div class="muted">Short or detailed feedback on the whole debate.</div>

      <div class="row" style="margin-top:12px;">
        <button class="btn" id="shortFbBtn" type="button" disabled>ğŸ§‘â€ğŸ« Short feedback</button>
        <button class="btn" id="detailedFbBtn" type="button" disabled>ğŸ“˜ Detailed feedback</button>
      </div>

      <div class="feedbackBox" id="feedbackBox">End a session to enable feedback.</div>
      <div class="tiny muted" style="margin-top:10px;">
        Feedback uses: your transcript + your edited text + opponent replies.
      </div>
    </section>
  </main>

  <!-- SETTINGS MODAL -->
  <div id="settingsOverlay" class="modalOverlay" aria-hidden="true">
    <div class="modal">
      <div class="modalHeader">
        <div class="modalTitle">Settings</div>
        <button class="btn" id="closeSettingsBtn" type="button">âœ•</button>
      </div>

      <div class="modalGrid">
        <div class="card">
          <div class="cardTitle">Topic</div>

          <div class="row">
            <button class="btn" id="suggestBtn" type="button">ğŸ’¡ Suggest topics</button>
            <select id="topicSelect">
              <option value="">â€” pick â€”</option>
            </select>
            <button class="btn" id="randomTopicBtn" type="button">ğŸ² Random</button>
          </div>

          <input id="topicInput" class="input" placeholder="Or type your own topic..." />

          <div class="row" style="margin-top:10px;">
            <button class="btn primary" id="applyTopicBtn" type="button">âœ… Apply topic</button>
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">Roles</div>

          <div class="row">
            <label class="label">Student side</label>
            <select id="studentSide">
              <option value="PRO" selected>PRO</option>
              <option value="CON">CON</option>
            </select>
          </div>

          <div class="row" style="margin-top:10px;">
            <label class="label">Difficulty</label>
            <select id="difficulty">
              <option value="Easy">Easy</option>
              <option value="Medium" selected>Medium</option>
              <option value="Hard">Hard</option>
            </select>
          </div>

          <div class="row" style="margin-top:12px;">
            <button class="btn primary" id="applyRolesBtn" type="button">âœ… Apply roles</button>
          </div>

          <div class="tiny muted" style="margin-top:8px;">
            Computer automatically takes the opposite side.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JS external (defer ensures DOM exists) -->
  <script src="/app.js?v=1" defer></script>
</body>
</html>